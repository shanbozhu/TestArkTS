import { BusinessError } from '@kit.BasicServicesKit';
import { ComponentContent, window } from '@kit.ArkUI';



@Entry
@Component
struct Index {

  build() {
    Row() {
      Column() {
        Button("click me")
          .onClick(() => {

            // 1
            let rep: RegExp = /\[[0-9a-zA-Z\u4e00-\u9fa5]+]/g;
            let s: string = "[åƒç“œ]ğŸ˜€å“ˆ[äº’ç²‰][ä¸­å›½é˜ŸåŠ æ²¹]ğŸ˜€";
            let ret = s.matchAll(rep);
            console.log('Found match', ret);
            for (const match of ret) {
              console.log(`Found match: ${match.index}, ${match.input}, ${match.length}`);
              console.log(`Found match: ${match[0]}, captured group: ${match[1]}`);
              console.log(`Found match: ${match[0].length}`);
            }

            // 2
            // ä½¿ç”¨ replace é…åˆå›è°ƒå‡½æ•°
            const result1 = s.replace(rep, (match, num: string) => {
              return `[resource://RAWFILE/001xin.webp_${num}]`; // å°†åŒ¹é…é¡¹æ›¿æ¢ä¸ºæŒ‡å®šå†…å®¹
            });
            console.log('Found match', result1); // è¾“å‡º: "[resource://RAWFILE/001xin.webp_0]ğŸ˜€å“ˆ[resource://RAWFILE/001xin.webp_7][resource://RAWFILE/001xin.webp_11]ğŸ˜€"

            // 3
            const text = "abc 123 def  456";
            const regex = /\b(\d+)\b/g;
            // ä½¿ç”¨ replace é…åˆå›è°ƒå‡½æ•°
            const result = text.replace(regex, (match, num: string) => {
              console.log('Found match', match, num);
              return `[${num}]`; // å°†åŒ¹é…é¡¹æ›¿æ¢ä¸ºæŒ‡å®šå†…å®¹
            });
            console.log('Found match', result); // è¾“å‡º: "abc [123] def [456]"
          })
      }
      .width('100%')
      .height('100%')
    }
    .height('100%')
  }
}